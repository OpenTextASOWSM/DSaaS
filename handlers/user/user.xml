<dynaments>
  <rde-dm:attribute mode="condition" attribute="request:username" op="ne" value="">
    <rde-dm:if>
      <rde-dm:attribute mode="condition" attribute="request:rde-rd:httpHeader-method" op="eq" value="GET">
        <rde-dm:if>
          <!-- Retrieve user record 
          make 'resulttype' dynamic? JSON? -->
          <rde-dm:user mode="report" user="[#request:username#]" resulttype="xml" tag="user" result-attribute="userDM" />
        </rde-dm:if>
        <rde-dm:else>
          <rde-dm:attribute mode="condition" attribute="request:rde-rd:httpHeader-method" op="eq" value="POST">
            <rde-dm:if>
              <!-- Create individual user record -->
            </rde-dm:if>
            <rde-dm:else>
              <rde-dm:attribute mode="condition" attribute="request:rde-rd:httpHeader-method" op="eq" value="DELETE">
                <rde-dm:if>
                  <!-- Delete individual user record -->
                </rde-dm:if>
                <rde-dm:else>
                  <!-- Unsupported HTTP method -->
                </rde-dm:else>
              </rde-dm:attribute>
            </rde-dm:else>
          </rde-dm:attribute>
        </rde-dm:else>
      </rde-dm:attribute>
      
      <!-- Error handling -->
      <rde-dm:attribute mode="read" attribute="request:userDM" />
      <rde-dm:attribute mode="condition" attribute="request:userDM" op="lt" value="0">
        <rde-dm:if>
          <!-- Codes less than zero indicate an error -->
        </rde-dm:if>
        <rde-dm:else>
          <!-- Codes greater than or equal to zero indicate information or warnings -->
        </rde-dm:else>
      </rde-dm:attribute>
    </rde-dm:if>
    <rde-dm:else>
      <!-- No user provided whose properties to output 
      HTTP response code 404: server can't map client's URL to a resource-->
      <rde-dm:attribute mode="write" attribute="request:rdeResponseStatus" value="404" />
    </rde-dm:else>
  </rde-dm:attribute>
</dynaments>